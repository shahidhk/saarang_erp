{% load staticfiles %}

<center>
<style type="text/css">
/* borderless table */
.table.table-borderless td, .table.table-borderless th {
    border: 0 !important;
}
.table.table-borderless {
    margin-bottom: 0px;
}
.popover {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1010;
  display: none;
  max-width: 600px;
  padding: 1px;
  text-align: left;
  white-space: normal;
  background-color: #ffffff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-border-radius: 6px;
     -moz-border-radius: 6px;
          border-radius: 6px;
  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
     -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
          box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -webkit-background-clip: padding-box;
     -moz-background-clip: padding;
          background-clip: padding-box;
}
table.dataTable tr.row_selected
{
  background-color: #B0BED9;
}
</style><div class="alert alert-info">
<table id="team_details" class="table table-bordered">
    <tr>
        <td>name:</td>
        <td><strong>{{ team.name }}</strong></td>
        <td>ID:</td>
        <td>{{ team.team_sid }}</td>
    </tr>
    <tr>
      <td>city:</td>
      <td>{{ team.city }}</td>
        <td>college:</td>
        <td>{{ team.leader.college }}</td>
    </tr>
</table></div>
<div class="alert alert-success">
<strong>Total {{ team.get_total_count }} members. ( {{ team.get_male_count }} males and {{ team.get_female_count }} females )</strong>
<table class="member_data table table-borderless">
  <thead>
    <th>No</th>
    <th>Website ID</th>
    <th>desk_id</th>
    <th id='gender'>gender</th>
    <th id='email'>email</th>
    <th id='name'>name</th>
    <th id='mobile'>mobile</th>
    <th id='college_id'>college_id</th>
    <th id='college'>college</th>
  </thead>
  <tbody>
    <tr id="{{team.leader.id}}" {% if team.leader.accomod_is_confirmed and team.accomodation_status != 'confirmed' %}class="error"{% endif %} >
      <td>1</td>
      <td><a href="#">{{ team.leader.saarang_id }}</a></td>
      <td>{{ team.leader.desk_id }}</td>
      <td>{{ team.leader.gender|title }}</td>
      <td>{{ team.leader.email }}</td>
      <td>{{ team.leader.name }}</td>
      <td>{{ team.leader.mobile }}</td>
      <td>{{ team.leader.college_id }}</td>
      <td>{{ team.leader.college }}</td>
    </tr>
    {% for member in team.members.all %}
    <tr id="{{member.id}}" {% if member.accomod_is_confirmed and team.accomodation_status != 'confirmed' %}class="error"{% endif %} >
      <td>{{ forloop.counter|add:1 }}</td>
      <td><a href="#">{{ member.saarang_id }}</a></td>
      <td>{{ member.desk_id }}</td>
      <td>{{ member.gender|title }}</td>
      <td>{{ member.email }}</td>
      <td>{{ member.name }}</td>
      <td>{{ member.mobile }}</td>
      <td>{{ member.college_id }}</td>
      <td>{{ member.college }}</td>
    </tr>
    {% endfor %}
    </tbody>
</table>
<div class="add_delete_toolbar"></div>
<hr/>

Members highlighted in red indicates people who have accommodation confirmed already in other teams. They will be automatically removed upon confirmation of this team. (Leader has been pre-notified)
</div>
<div class="alert alert-error">
Accomodation
{% if team.checked_status == 'out' %}
{% if editable %}
  <a type="button" id="myPopover" onclick="$('#myPopover').popover();" class="btn btn-default" data-toggle="popover" data-html="true" data-placement="top" data-content="<form action=&quot;{% url 'hospi.views.update_status' team.pk %}&quot; method='post'>{% csrf_token %}<label class='radio inline'><input type='radio' name='status' value='not_req'><span class='label'>Not required</span></label><label class='radio inline'><input type='radio' name='status' value='requested'><span class='label label-info'>Pending</span></label><label class='radio inline'><input type='radio' name='status' value='confirmed'><span class='label label-success'>Confirm</span></label><label class='radio inline'><input type='radio' name='status' value='waitlisted'><span class='label label-warning'>Waitlist</span></label><label class='radio inline'><input type='radio' name='status' value='rejected'><span class='label label-important'>Reject</span></label><hr/>Status once changed to Confirm or Reject cannot be reverted back<input type='submit' class='btn btn-small' value='Update'></input></form>" data-original-title="Update status" title="">{% endif %}
    {% if team.accomodation_status == 'requested' %}
      <span class="label label-info">Pending for approval</span>
    {% elif team.accomodation_status == 'confirmed' %}
      <span class="label label-success">Confirmed</span>
    {% elif team.accomodation_status == 'not_req' %}
      <span class="label">Not required</span>
    {% elif team.accomodation_status == 'waitlisted' %}
      <span class="label label-warning">Waitlisted</span>
    {% elif team.accomodation_status == 'rejected' %}
      <span class="label label-important">Rejected</span>   
    {% endif %}
{% if editable %} 
  </a>{% endif %}
{% endif %}
{% if team.accomodation_status == 'confirmed' and team.checked_status != 'in' %}
<a href="{% url 'hospi.views.check_in_team' team.pk %}" data-target="#checkinModal" class="btn btn-success"><i class="icon-home"></i> Check-in</a>
{% elif team.accomodation_status == 'confirmed' and team.checked_status == 'in' %}<span class="badge badge-success"><i class="icon-home icon-white"></i> IN</span>
<a href="{% url 'hospi.views.check_out_team' team.pk %}" data-target="#checkoutModal" class="btn btn-danger"><i class="icon-home"></i> Check-out</a>
{% endif %}


                        <hr/>
<table class="table table-borderless">
    <tr>
        <th>From</th>
        <td>{{ team.time_of_arrival|title }} on {{ team.date_of_arrival }} </td>
    </tr>
    <tr>
        <th>to</th>
        <td>{{ team.time_of_departure|title }} on {{ team.date_of_departure }}</td>
    </tr>
</table><hr/>
      <div class="spacer"></div>

</div>
</center>
  
<div id="checkinModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="checkinModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" onclick="$('#checkinModal').modal('hide');" aria-hidden="true">×</button>
    <h3 id="checkinModalLabel">Check in team</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…</p>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="$('#checkinModal').modal('hide');" aria-hidden="true">Close</button>
   
  </div>
</div>



<script type="text/javascript">
$("a[data-target=#checkinModal]").click(function(event) {
    event.preventDefault();
    var target = $(this).attr("href");
    $("#checkinModal .modal-body").load(target, function() {
         $("#checkinModal").modal("show");
    });
});
</script>
{% if editable %}
<script type="text/javascript">
      $('#myPopover').popover();
</script> 
{% endif %}


<div id="adduserModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="adduserModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" onclick="$('#adduserModal').modal('hide');" aria-hidden="true">×</button>
    <h3 id="adduserModalLabel">Add member</h3>
  </div>
  <div class="modal-body">
    <form title="Add new member">
  {{addUserForm.as_p}}
  <input type="hidden" name="team_id" value="{{team.pk}}" />
</form>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="$('#adduserModal').modal('hide');" aria-hidden="true">Close</button>
   
  </div>
</div>
